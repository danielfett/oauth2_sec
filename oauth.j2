<!DOCTYPE html>
<html>
    <head>
        <style>
         body {
             font: 20px helvetica neue, helvetica, arial, sans-serif;
         }

         #cy {
             height: 100vh;
             width: 100vw;
         }
        </style>
        <meta charset=utf-8 />
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">
        <title>{{ config.title }}</title>
        <script src="js/cytoscape.js"></script>
    </head>
    <body>
        <div>
            <h1>{{ config.title }}</h1>
            {{ config.desc }}
            {% for secprop in config.security_properties %}
            <h2>{{ secprop.name }}</h2>
            <p>{{ secprop.desc }} (green=true, red=false, grey=unknown)</p>
            {% endfor %}
        </div>
        <div id="cy"></div>
        <!-- Load application code at the end to ensure DOM is loaded -->
        <script>
         
         var cy = cytoscape({
             container: document.getElementById('cy'),

             boxSelectionEnabled: false,
             autounselectify: true,

             style: [
                 {
                     "selector":"node[type=\"node\"]",
                     "css":{
                         "content":"data(label)",
                         "font-size":"25px"
                     }
                 },
                 {
                     "selector":"edge",
                     "css":{
                         "curve-style":"bezier",
                         "target-arrow-shape":"triangle",
                         "width":4,
                         "line-color":"#ddd",
                         "target-arrow-color":"#ddd"
                     }
                 },
                 {% for secprop in config.security_properties %}
                 {% for state, color in secprop.colors.items() %}
                 {
                     "selector":"node[state=\"{{ secprop.id }}_{{ state }}\"]",
                     "css":{
                         "background-color":"{{ color }}"
                     }
                 },
                 {% endfor %}
                 {% endfor %}
                 {
                     "selector":"$node > node",
                     "css":{
                         "padding-top":"10px",
                         "padding-left":"10px",
                         "padding-bottom":"10px",
                         "padding-right":"10px",
                         "text-valign":"center",
                         "text-halign":"left",
                         "font-size":"30px",
                         "content":"data(label)"
                     }
                 },
                 {
                     "selector":"#secprop_results",
                     "css":{
                         "padding-top":"10px",
                         "padding-left":"10px",
                         "padding-bottom":"10px",
                         "padding-right":"10px",
                         "text-valign":"center",
                         "text-halign":"left",
                         "font-size":"30px",
                         "content":"Secure?",
                         "background-color":"#eef",
                     }
                 },
                 {
                     "selector":"node[type=\"rule\"]",
                     "css":{
                         "width": "1em",
                         "text-max-width": "14.5em",
                         "height": "label",
                         "text-wrap": "wrap",
                         "text-valign":"center",
                         "text-halign":"center",
                         "font-size":"15px",
                         "content":"data(label)",
                         "background-color":"#efe",
                         "text-background-opacity": "1",
                         "text-background-color": "#efe",
                         "text-background-shape": "roundrectangle",
                         "text-border-color": "#363",
                         "text-border-width": "1",
                         "text-border-opacity": "1",
                     }
                 },
                 
             ],
             elements: {{ elements }},
             layout: {
                 name: 'breadthfirst',
                 directed: true,
                 roots: '#{{ root }}',
                 padding: 0,
                 nodeDimensionsIncludeLabels: false,
                 spacingFactor: 1,
             }
         });

         
        </script>

        
    </body>
</html>
